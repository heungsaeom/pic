C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE CODE_CUBE
OBJECT MODULE PLACED IN CODE_CUBE.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE CODE_CUBE.C BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <REGX52.H>
   2           /////////////////
   3          #define dk P3     //dieu_khien
   4          #define ms P2     //quet
   5          #define dl P1           //du lieu
   6          ///////////////////////////////////////////////
   7          #define ab 3             //thoi gian 1 led sang
   8          #define bc 2
   9          //#define bc 3
  10          ///////////////////////////////////////////////////////
  11          void delay(int t)                                                       //delay
  12          {int i;
  13   1      unsigned char b;
  14   1      for (i=0;i<t;i++){for(b=0;b<125;b++)
  15   2      {;}}
  16   1      }
  17          /////////////////
  18          
  19          void linh_tinh()
  20          { unsigned char so[31]={0xfe,0xfd,0xfb,0xf7,0xef,0xdf,0xbf,0x7f,
  21   1                            0xfe,0xfc,0xf8,0xf0,0xe0,0xc0,0x80,0x00,
  22   1                                                0xf8,0xf1,0xe3,0xc7,0x8f,0x1f,
  23   1                                                0xf0,0xe1,0xc3,0x87,0x0f,
  24   1                                                0xe0,0xc1,0x83,0x07}; 
  25   1      unsigned char i,j;
  26   1      for (i=0;i<8;i++)                                    // sang quet tat
  27   1       { dk=~so[i]; dl=0xff; ms= 0xff;  delay(200);}
  28   1      for (i=0;i<8;i++)
  29   1       { dl=~so[i]; dk=~0xff; ms= 0xff;  delay(200);}
  30   1      for (i=0;i<8;i++)
  31   1       { ms=~so[i]; dk=~0xff; dl= 0xff; delay(200);}
  32   1       /////////////////// 
  33   1      dk=~0X00; dl=0X00; ms= 0x00;  delay(500);      //chop tat 
  34   1      dk=~0XFF; dl=0xff; ms= 0xff;  delay(400); 
  35   1      dk=~0X00; dl=0X00; ms= 0x00;  delay(400);
  36   1      dk=~0XFF; dl=0xff; ms= 0xff;  delay(400);
  37   1      ///////////////////
  38   1      for (i=8;i<16;i++)                                           //sang het giam dan  
  39   1        { dk=so[i]; delay(500) ; }
  40   1      //////////////////
  41   1      for(j=0;j<2;j++)                                                                                   //chay hinh hop
  42   1      {for(i=15;i<10;i++)
  43   2       { dk=~so[i];ms=so[i];dl =so[i]; delay(300);}
  44   2       }
  45   1       for(j=0;j<3;j++)
  46   1      {for(i=21;i<27;i++)
  47   2       { dk=~so[i];ms=so[i];dl =so[i]; delay(300);}
  48   2      
  49   2       }
  50   1      for(j=0;j<4;j++)
  51   1      {for(i=26;i<31;i++)
  52   2       { dk=~so[i];ms=so[i];dl =so[i]; delay(300);}
  53   2      }
  54   1      }
  55          //////////////////////
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 2   

  56          void quet_qua_lai ()
  57          { dk= ~0xff,dl =0xff;
  58   1         ms =0x01;delay(250);ms =0x03;delay(250);ms =0x06;delay(250);ms =0x0c;delay(250);      //len
  59   1         ms =0x18;delay(250);ms =0x30;delay(250);ms =0x60;delay(250);ms =0xc0;delay(250);ms =0x80;delay(250);
  60   1      
  61   1         ms =0xc0;delay(250);ms =0x60;delay(250);ms =0x30;delay(250);ms =0x18;delay(250);     //xuong
  62   1         ms =0x0c;delay(250);ms =0x06;delay(250);ms =0x03;delay(250);ms =0x01;delay(250);
  63   1        ms= 0xff;dl =0xff;
  64   1         dk =~0x01;delay(250);dk =~0x03;delay(250);dk =~0x06;delay(250);dk =~0x0c;delay(250);  //tientoi
  65   1         dk =~0x18;delay(250);dk =~0x30;delay(250);dk =~0x60;delay(250);dk =~0xc0;delay(250);dk =~0x80;delay(250
             -);
  66   1      
  67   1         dk =~0xc0;delay(250);dk =~0x60;delay(250);dk =~0x30;delay(250);dk =~0x18;delay(250); //tien lui
  68   1         dk =~0x0c;delay(250);dk =~0x06;delay(250);dk =~0x03;delay(250);dk =~0x01;delay(250);
  69   1        ms=0xff; dk =~0xff;
  70   1         dl =0xc0;delay(250);dl =0x60;delay(250);dl =0x30;delay(250);dl =0x18;delay(250);     //qua phai
  71   1         dl =0x0c;delay(250);dl =0x06;delay(250);dl =0x03;delay(250);dl =0x01;delay(250);
  72   1      
  73   1         dl =0x03;delay(250);dl =0x06;delay(250);dl =0x0c;delay(250);                     //qua trai
  74   1         dl =0x18;delay(250);dl =0x30;delay(250);dl =0x60;delay(250);dl =0xc0;delay(250);
  75   1      }
  76          /////////////////
  77          void hinh_vuong()
  78          {unsigned char hv[32] ={0xff,0x7f,0x3f,0x1f,0x0f,0x07,0x03,0x01,
  79   1                                                  0x01,0x03,0x07,0x0f,0x1f,0x3f,0x7f,0xff,
  80   1                                                  0xff,0xfe,0xfc,0xf8,0xf0,0xe0,0xc0,0x80,
  81   1                                                  0x80,0xc0,0xe0,0xf0,0xf8,0xfc,0xfe,0xff,};
  82   1       unsigned char i;  
  83   1          for(i=0;i<8;i++)
  84   1                {ms= hv[i]; dk=~hv[i];dl=hv[i];delay(200);}                    //xuong qua phai
  85   1               ms=0x00;dl=0x00;dk=0x00;  
  86   1              for(i=8;i<16;i++)
  87   1                {ms= hv[i]; dk=~hv[i];dl=hv[i];delay(200);}
  88   1      
  89   1              for(i=16;i<24;i++)                                                                              //len qua trai
  90   1                {ms= hv[i]; dk=~hv[i];dl=hv[i];delay(200);}
  91   1              for(i=24;i<32;i++)
  92   1                {ms= hv[i]; dk=~hv[i];dl=hv[i];delay(200);}
  93   1                      ///////////////////
  94   1      
  95   1              for(i=0;i<8;i++)
  96   1                {ms= hv[i+16]; dk=~hv[i];dl=hv[i];delay(200);}                 //len qua phai
  97   1              for(i=8;i<16;i++)
  98   1                {ms= hv[i+16]; dk=~hv[i];dl=hv[i];delay(200);} 
  99   1      
 100   1      
 101   1              for(i=0;i<8;i++)
 102   1                {ms= hv[i]; dk=~hv[i+16];dl=hv[i+16];delay(200);}              //xuong qua trai
 103   1              for(i=8;i<16;i++)
 104   1                {ms= hv[i]; dk=~hv[i+16];dl=hv[i+16];delay(300);}  
 105   1      
 106   1                          /////////////////////
 107   1              for(i=0;i<8;i++)
 108   1                {ms= hv[i]; dk=~hv[i+16];dl=hv[i];delay(200);}                 //xuong toi truoc
 109   1              for(i=8;i<16;i++)
 110   1                {ms= hv[i]; dk=~hv[i+16];dl=hv[i];delay(200);}  
 111   1      
 112   1              for(i=0;i<8;i++)
 113   1                {ms= hv[i+16]; dk=~hv[i];dl=hv[i+16];delay(200);}              //len ra sau
 114   1              for(i=8;i<16;i++)
 115   1                {ms= hv[i+16]; dk=~hv[i];dl=hv[i+16];delay(200);}  
 116   1                         ////////////////////
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 3   

 117   1              for(i=0;i<8;i++)
 118   1                {ms= hv[i+16]; dk=~hv[i+16];dl=hv[i];delay(200);}              //len toi truoc
 119   1              for(i=8;i<16;i++)
 120   1                {ms= hv[i+16]; dk=~hv[i+16];dl=hv[i];delay(200);} 
 121   1      
 122   1              for(i=0;i<8;i++)
 123   1                {ms= hv[i]; dk=~hv[i];dl=hv[i+16];delay(200);}                 //xuong ra sau
 124   1              for(i=0;i<8;i++)
 125   1                {ms= hv[i+8]; dk=~hv[i+8];dl=hv[i+24];delay(200);} 
 126   1                                        ///////////////////
 127   1              ms=0x7e;dl=0x7e,dk=~0x7e;delay(500);                                             //thu nho lai
 128   1              ms=0x3c;dl=0x3c;dk=~0x3c;delay(500);
 129   1              ms=0x18;dl=0x18;dk=~0x18;delay(500);
 130   1              ms=0x00;dl=0x00;dk=~0x00;delay(500);
 131   1      
 132   1      }
 133          /////////////////
 134          void quet_mang()
 135          {unsigned char i,j;
 136   1      unsigned char mg4[29] ={0xfe,0xfd,0xfb,0xf7,0xef,0xdf,0xbf,0x7f,
 137   1                              0xbf,0xdf,0xef,0xf7,0xfb,0xfd,
 138   1                                                  0x7f,0xbf,0xdf,0xef,0xf7,0xfb,0xfd,0xfe,
 139   1                                                      0xfd,0xfb,0xf7,0xef,0xdf,0xbf,0x7f};
 140   1      
 141   1       dl=0xff;dk=~0xff;
 142   1        ms=0x01;delay(300);
 143   1        ms=0x03;delay(300);
 144   1        ms=0x07;delay(300);
 145   1        ms=0x0f;delay(300);
 146   1        ms=0x1f;delay(300);
 147   1        ms=0x3f;delay(300);
 148   1        ms=0x7f;delay(300);
 149   1        ms=0xff;delay(300);
 150   1       for(i=0;i<5;i++)
 151   1         {for(j=0;j<14;j++)
 152   2           {ms=mg4[j];dl=mg4[j];dk=~mg4[j+14];delay(300);
 153   3               }
 154   2         }
 155   1      }
 156          //////////////////
 157          
 158             void mang1() {dl=0x01;}                               
 159             void mang2() {dl=0x02;}                               
 160             void mang3() {dl=0x04;}                               
 161             void mang4() {dl=0x08;}                              
 162             void mang5() {dl=0x10;}                              
 163             void mang6() {dl=0x20;}                              
 164             void mang7() {dl=0x40;}                              
 165             void mang8() {dl=0x80;}                              
 166          
 167          void mang_len_xuong()
 168          {unsigned char i,j,k;
 169   1      ////////////////////////
 170   1       unsigned char mg[21]={0x01,0x02,0x04,0x08,0x10,0x20,0x40,                         //xuong
 171   1                             0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01,
 172   1                                                 0x02,0x04,0x08,0x10,0x20,0x40                                           //len
 173   1                                                 };
 174   1       unsigned char mg2[16]={0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,                  //xep len
 175   1                              0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80};       
 176   1                                                                              
 177   1       unsigned char mg3[21]={0x80,0x80,0x80,0x80,
 178   1                                     0x40,0x20,0x10,0x08,0x04,0x02,0x01,                              //xuong
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 4   

 179   1                                                         0x01,0x01,0x01,
 180   1                                                         0x02,0x04,0x08,0x10,0x20,0x40,0x80                      //len
 181   1                                };                                            
 182   1                                                                                                                                                                 
 183   1       for(i=0;i<15;i++)
 184   1         {for(j=7;j<21;j++)
 185   2           {for(k=0;k<10;k++)
 186   3                 {dk=~0xff;
 187   4                  ms=mg[j];   mang1();delay(2);                                        ///mang quet len xuong
 188   4                  ms=mg[j-1]; mang2();delay(2);
 189   4                      ms=mg[j-2]; mang3();delay(2);
 190   4                      ms=mg[j-3]; mang4();delay(2);
 191   4                      ms=mg[j-4]; mang5();delay(2);
 192   4                      ms=mg[j-5]; mang6();delay(2);
 193   4                      ms=mg[j-6]; mang7();delay(2);
 194   4                      ms=mg[j-7]; mang8();delay(2);
 195   4                 }
 196   3               }
 197   2         };
 198   1      //////////////////////
 199   1                                                                                                                                                                         
 200   1         for(j=7;j<16;j++)
 201   1           {for(k=0;k<15;k++)
 202   2                 {dk=~0xff;
 203   3                  ms=mg2[j];   mang1();delay(3);                      //      mang tap trung len tren
 204   3                  ms=mg2[j-1]; mang2();delay(3);
 205   3                      ms=mg2[j-2]; mang3();delay(3);
 206   3                      ms=mg2[j-3]; mang4();delay(3);
 207   3                      ms=mg2[j-4]; mang5();delay(3);
 208   3                      ms=mg2[j-5]; mang6();delay(3);
 209   3                      ms=mg2[j-6]; mang7();delay(3);
 210   3                      ms=mg2[j-7]; mang8();delay(3);
 211   3                 }
 212   2               };
 213   1      /////////////////
 214   1      
 215   1       for(i=0;i<10;i++)
 216   1         {for(j=4;j<21;j++)
 217   2           {for(k=0;k<15;k++)
 218   3                 {dk=~0xff;
 219   4                  ms=mg3[j];   mang4();delay(2);mang5();delay(2);                       //canh chim bay
 220   4                  ms=mg3[j-1]; mang3();delay(2);mang6();delay(2);
 221   4                      ms=mg3[j-2]; mang2();delay(2);mang7();delay(2);
 222   4                      ms=mg3[j-3]; mang1();delay(2);mang8();delay(2);
 223   4                 }
 224   3               }
 225   2         };
 226   1      ms=0x00;dl=0x00;dk=~0x00;delay(500);
 227   1      }
 228          /////////////////
 229          void so1()  {dk =~0x81;dl =0x81;delay(ab),dk =~0x81;dl =0x81;delay(bc);}
 230          void so2() {dk =~0x42;dl =0x81;delay(ab),dk =~0x81;dl =0x42;delay(bc);}                 //du lieu
 231          void so3a() {dk =~0x24;dl =0x81;delay(ab),dk =~0x81;dl =0x24;delay(bc);}
 232          void so3b()  {dk =~0x42;dl =0x42;delay(ab),dk =~0x42;dl =0x42;delay(bc);}
 233          void so4a()  {dk =~0x18;dl =0x81;delay(ab),dk =~0x81;dl =0x18;delay(bc);}
 234          void so4b()  {dk =~0x24;dl =0x42;delay(ab),dk =~0x42;dl =0x24;delay(bc);}
 235          void so5a()  {dk =~0x18;dl =0x42;delay(ab),dk =~0x42;dl =0x18;delay(bc);}
 236          void so5b()  {dk =~0x24;dl =0x24;delay(ab),dk =~0x24;dl =0x24;delay(bc);}
 237          void so6()   {dk =~0x18;dl =0x24;delay(ab),dk =~0x24;dl =0x18;delay(bc);}
 238          void so7()   {dk =~0x18;dl =0x18;delay(ab),dk =~0x18;dl =0x18;delay(bc);}
 239          /////////////////
 240                                  
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 5   

 241          /////////////////
 242          void pheu_len_xuong()
 243          { unsigned char so[33]={0x10,0x08,0x04,0x02,0x01,0x01,0x01,0x01,0x01,
 244   1                            0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,                           //len
 245   1                            0x80,0x80,0x80,0x80,
 246   1                                                0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01,                               //xuong
 247   1                                                0x01,0x01,0x01,0x01};
 248   1      unsigned char a,c,b;
 249   1      for(c=0;c<10;c++)
 250   1       {for(a=10;a<33;a++)
 251   2        {for(b=0;b<4;b++)
 252   3          {ms= so[a]; so1();   
 253   4           ms= so[a-1]; so2();
 254   4               ms= so[a-2]; so3a();
 255   4               ms= so[a-3]; so3b();
 256   4               ms= so[a-4]; so4a();
 257   4               ms= so[a-5]; so4b();
 258   4               ms= so[a-6]; so5a();
 259   4               ms= so[a-7]; so5b();
 260   4               ms= so[a-8]; so6();
 261   4               ms= so[a-9]; so7();
 262   4               ms= so[a-10]; so7();
 263   4          }
 264   3        }
 265   2       }
 266   1      }
 267          //////////////////////////
 268          void mua_roi()
 269          {unsigned char so[22] ={0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 270   1                              0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01,
 271   1                                                      0x00,0x00,0x00,0x00};
 272   1       unsigned char i,j,k ;
 273   1       for(k=0;k<10;k++)
 274   1         {for(i=16;i<22;i++)
 275   2      
 276   2                {for(j=0;j<3;j++) 
 277   3                  {ms =so[i];
 278   4                    dl=0x88;dk=~0x21;delay(10);
 279   4                       ms =so[i-1]; 
 280   4                        dl=0x12;dk=~0x11;delay(10);
 281   4                       ms =so[i-2];
 282   4                    dl=0x42;dk=~0xc4;delay(10);
 283   4                       ms =so[i-4];
 284   4                    dl=0x14;dk=~0x54;delay(10);
 285   4                       ms =so[i-6];
 286   4                    dl=0x21;dk=~0x22;delay(10);
 287   4                       ms =so[i-8];
 288   4                        dl=0x12;dk =~0x22;delay(10);
 289   4                       ms =so[i-10];
 290   4                        dl=0x82;dk =~0x14;delay(10);
 291   4                      }
 292   3                }
 293   2              }
 294   1      }
 295          ////////////////////////
 296          void ban_phao_hoa(unsigned char lap)
 297          { unsigned int b;
 298   1        unsigned char a,c;
 299   1        unsigned char maso2[14]={0x80,0xc0,0x20,0x10,0x08,0x04,0x02,
 300   1                                 0x01,0x00,0x00,0x00,0x00,0x00,0x00};
 301   1         for(a=0;a<lap;a++)
 302   1          {
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 6   

 303   2              dk=~0x10;dl=0x10;
 304   2               ms =0x03;delay(200);                                                                   //chay len
 305   2               ms =0x06;delay(200);
 306   2               ms =0x0c;delay(200);
 307   2               ms =0x18;delay(200);
 308   2               ms =0x30;delay(200);
 309   2               ms =0x60;delay(200);
 310   2              dk=~0x30;dl=0x30;                                                                         //no23
 311   2               ms =0xe0;delay(150);
 312   2              dk=~0x38;dl=0x38;
 313   2               ms =0xe0;delay(150);
 314   2                for(b=0;b<13;b++)                                                               //chuki 1
 315   2                 {ms =0x80;
 316   3                   dk =~0x68;dl=0x40;delay(ab);
 317   3                   dk =~0x0c;dl=0x20;delay(ab);
 318   3                       dk =~0x54;dl=0x10;delay(ab);
 319   3                       dk =~0x50;dl=0x08;delay(ab);
 320   3                       dk =~0x2c;dl=0x04;delay(ab);
 321   3                      ms =0x40;
 322   3                       dk =~0x38;dl=0x40;delay(ab);
 323   3                   dk =~0x2a;dl=0x20;delay(ab);
 324   3                       dk =~0x4a;dl=0x10;delay(ab);
 325   3                       dk =~0x34;dl=0x08;delay(ab);
 326   3                       dk =~0x14;dl=0x04;delay(ab);
 327   3                      ms =0x08;
 328   3                   dk =~0x30;dl=0x20;delay(ab);
 329   3                   dk =~0x28;dl=0x10;delay(ab);
 330   3                       dk =~0x10;dl=0x08;delay(ab);
 331   3                      }
 332   2      
 333   2      
 334   2                for(b=0;b<13;b++)                                                        //chuki2
 335   2                 {ms =0x80;
 336   3                       dk =~0x24;dl=0x80;delay(ab);
 337   3                   dk =~0x66;dl=0x40;delay(ab);
 338   3                   dk =~0x14;dl=0x20;delay(ab);
 339   3                       dk =~0x72;dl=0x10;delay(ab);
 340   3                       dk =~0x96;dl=0x04;delay(ab);
 341   3                       dk =~0xd8;dl=0x02;delay(ab);
 342   3                      ms =0x40;
 343   3                   dk =~0x66;dl=0x40;delay(ab);
 344   3                   dk =~0xe4;dl=0x20;delay(ab);
 345   3                       dk =~0x38;dl=0x10;delay(ab);
 346   3                       dk =~0x5a;dl=0x08;delay(ab);
 347   3                       dk =~0xd8;dl=0x02;delay(ab);
 348   3                      ms =0x20;
 349   3                   dk =~0x68;dl=0x40;delay(ab);
 350   3                       dk =~0xe4;dl=0x10;delay(ab);
 351   3                       dk =~0x5a;dl=0x08;delay(ab);
 352   3                       dk =~0x26;dl=0x04;delay(ab);
 353   3                      ms =0x08;
 354   3                       dk =~0x84;dl=0x20;delay(ab);
 355   3                       dk =~0x72;dl=0x10;delay(ab);
 356   3                       dk =~0x5a;dl=0x08;delay(ab);
 357   3                        }
 358   2      
 359   2      
 360   2                        for(c=5;c<14;c++)                                                                     //no roi xuong
 361   2                          {
 362   3                                         for(b=0;b<6;b++)
 363   3                      {ms =maso2[c]; 
 364   4                         dk =~0x66;dl=0x40;delay(3);
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 7   

 365   4                         dk =~0x84;dl=0x20;delay(3);                 
 366   4                             dk =~0x5a;dl=0x08;delay(3);
 367   4                             dk =~0x16;dl=0x04;delay(3);
 368   4                              ms =maso2[c-2];
 369   4                                 dk =~0x81;dl=0x80;delay(3);
 370   4                         dk =~0x24;dl=0x40;delay(3);             
 371   4                         dk =~0x51;dl=0x08;delay(3);
 372   4                             dk =~0x88;dl=0x02;delay(3);
 373   4                         ms =maso2[c-3];
 374   4                             dk =~0x44;dl=0x10;delay(3);
 375   4                                 dk =~0x44;dl=0x20;delay(3);
 376   4                              } 
 377   3                          }
 378   2                       }
 379   1         }
 380          ////////////////
 381          
 382          void hieu_ung_lop_mang(unsigned char time,unsigned char lap)
 383          {
 384   1              unsigned char a;
 385   1              unsigned char x,y;
 386   1      
 387   1              unsigned char code ma[]={0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80};
 388   1              unsigned char code dieu_khien[]={0xFE,0xFD,0xFB,0xF7,0xEF,0xDF,0xBF,0x7F}; 
 389   1      
 390   1              /////////////////////// trai phai
 391   1              dk=0xff;
 392   1              ms=dl=0x00;
 393   1      for(y=0;y<lap;y++)
 394   1      {
 395   2         for(a=0;a<4;a++)
 396   2        {
 397   3              for(x=0;x<8;x++)
 398   3              {
 399   4                      
 400   4                      dk=0x00;
 401   4                      dl=ma[x];
 402   4                      ms=0xff;                        
 403   4                      delay(time);
 404   4                      ms=dl=0x00;
 405   4                      
 406   4                      
 407   4                      
 408   4              }
 409   3              for(x=0;x<8;x++)
 410   3              {
 411   4                      dk=0x00;
 412   4                      dl=ma[7-x];
 413   4                      ms=0xff;                        
 414   4                      delay(time);
 415   4                      ms=dl=0x00;
 416   4      
 417   4                      
 418   4                      
 419   4              }
 420   3        } 
 421   2              ///lop len xuong
 422   2        for(a=0;a<4;a++)
 423   2        {
 424   3              for(x=0;x<8;x++)
 425   3              {
 426   4                      dk=0x00;
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 8   

 427   4                      dl=0xff;
 428   4                      ms=ma[x];
 429   4                      delay(time);
 430   4                      
 431   4                      
 432   4              }
 433   3              for(x=0;x<8;x++)
 434   3              {
 435   4                      dk=0x00;
 436   4                      dl=0xff;
 437   4                      ms=ma[7-x];
 438   4                      delay(time);
 439   4                      
 440   4                      
 441   4              }
 442   3        }
 443   2        //////////////  mang truoc sau
 444   2         for(a=0;a<4;a++)
 445   2        {
 446   3              for(x=0;x<8;x++)
 447   3              {               
 448   4                      dl=0xff;
 449   4                      dk=dieu_khien[x];
 450   4                      ms=0xff;
 451   4                      delay(time);
 452   4                      
 453   4                      
 454   4              }
 455   3              for(x=0;x<8;x++)
 456   3              {
 457   4                      dl=0xff;
 458   4                      dk=dieu_khien[7-x];
 459   4                      ms=0xff;
 460   4                      delay(time);
 461   4                      
 462   4                      
 463   4              }
 464   3        }
 465   2       }
 466   1       }
 467          
 468          ////////////////////////////
 469          
 470          void lop_mang_xen_ke(unsigned char time,unsigned char lap)
 471          {
 472   1              unsigned char a;
 473   1              unsigned char x;
 474   1      
 475   1              unsigned char code ma[]={0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80};
 476   1              unsigned char code dieu_khien[]={0xFE,0xFD,0xFB,0xF7,0xEF,0xDF,0xBF,0x7F}; 
 477   1      for(a=0;a<lap;a++)
 478   1      {
 479   2              for(x=0;x<8;x++)
 480   2              {               
 481   3                      dl=0xff;
 482   3                      dk=dieu_khien[x];  //truoc  
 483   3                      ms=0xff;
 484   3                      delay(time);
 485   3                                                                              
 486   3                      
 487   3              }
 488   2              //////////
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 9   

 489   2              for(x=0;x<8;x++)
 490   2              {
 491   3                      
 492   3                      dk=0x00;
 493   3                      dl=ma[x];
 494   3                      ms=0xff;                 //phai 
 495   3                      delay(time);
 496   3                      ms=dl=0x00;
 497   3                      
 498   3                      
 499   3                      
 500   3              }
 501   2              ///////////////
 502   2              for(x=0;x<8;x++)
 503   2              {
 504   3                      dk=0x00;
 505   3                      dl=0xff;     //xuong
 506   3                      ms=ma[7-x];
 507   3                      delay(time);
 508   3                      
 509   3                      
 510   3              }
 511   2              ///////////
 512   2              for(x=0;x<8;x++)
 513   2              {
 514   3                      dk=0x00;
 515   3                      dl=ma[7-x];
 516   3                      ms=0xff;                //trai  
 517   3                      delay(time);
 518   3                      ms=dl=0x00;                             
 519   3              }
 520   2              ///////////////
 521   2              for(x=0;x<8;x++)
 522   2              {
 523   3                      dl=0xff;
 524   3                      dk=dieu_khien[7-x]; //sau
 525   3                      ms=0xff;
 526   3                      delay(time);
 527   3                                      
 528   3              }
 529   2                      for(x=0;x<8;x++)
 530   2              {
 531   3                      dk=0x00;
 532   3                      dl=0xff;     //xuong
 533   3                      ms=ma[7-x];
 534   3                      delay(time);            
 535   3                      
 536   3              }
 537   2      
 538   2      }               
 539   1      }
 540          /////////////////////   
 541          void hienthichucai(unsigned char text,int tocdo)
 542          { 
 543   1                                 
 544   1      
 545   1              unsigned char code quet[]={0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01};    
 546   1      //      unsigned char code dieu_khien[]={0xFE,0xFD,0xFB,0xF7,0xEF,0xDF,0xBF,0x7F}; 
 547   1              unsigned char code machucai[32]={
 548   1              0x66,0xFF,0xFF,0xDB,0xDB,0xC3,0xC3,0x00,         //M
 549   1              0x1F,0x33,0x33,0x1F,0x0F,0x1B,0x33,0x00,          //R
 550   1              0x7E,0x18,0x18,0x18,0x18,0x18,0x18,0x00,          //T
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 10  

 551   1              0x66,0x66,0x66,0x66,0x66,0x66,0x3C,0x00,           //U
 552   1              };
 553   1      
 554   1      
 555   1               unsigned char a,c;     
 556   1              switch(text)
 557   1              {
 558   2                      case 'M':
 559   2                      {                             
 560   3                              for(c=0;c<tocdo;c++)
 561   3                               {
 562   4                                  for(a=0;a<8;a++)
 563   4                                      {                                
 564   5                                      dl=machucai[a];
 565   5                                      dk=0xE7;
 566   5                                      ms=quet[a];
 567   5                                      delay(5);
 568   5                                      dl=ms=0x00;
 569   5                                              
 570   5                                      }       
 571   4                                      
 572   4                   }
 573   3                               
 574   3                         }
 575   2                      break;
 576   2      
 577   2                      case 'R':
 578   2                      {             
 579   3                              for(c=0;c<tocdo;c++)
 580   3                               {
 581   4                                  for(a=0;a<8;a++)
 582   4                                      {                                
 583   5                                      dl=machucai[a+8];
 584   5                                      dk=0xE7;
 585   5                                      ms=quet[a];
 586   5                                      delay(5);
 587   5                                      dl=ms=0x00;
 588   5                                              
 589   5                                      }       
 590   4                                      
 591   4                   }
 592   3                               
 593   3                         }
 594   2                      break;
 595   2                      case 'T':
 596   2                      {                             
 597   3                              for(c=0;c<tocdo;c++)
 598   3                               {
 599   4                                  for(a=0;a<8;a++)
 600   4                                      {                                
 601   5                                      dl=machucai[a+16];
 602   5                                      dk=0xE7;
 603   5                                      ms=quet[a];
 604   5                                      delay(5);
 605   5                                      dl=ms=0x00;
 606   5                                              
 607   5                                      }       
 608   4                                      
 609   4                   }
 610   3                               
 611   3                         }
 612   2                      break;
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 11  

 613   2                      case 'U':
 614   2                      {                             
 615   3                              for(c=0;c<tocdo;c++)
 616   3                               {
 617   4                                  for(a=0;a<8;a++)
 618   4                                      {                                
 619   5                                      dl=machucai[a+24];
 620   5                                      dk=0xE7;
 621   5                                      ms=quet[a];
 622   5                                      delay(5);
 623   5                                      dl=ms=0x00;
 624   5                                              
 625   5                                      }       
 626   4                                      
 627   4                   }
 628   3                               
 629   3                         }
 630   2                      break;
 631   2      
 632   2                 }
 633   1                              
 634   1             
 635   1       }
 636          ///////////////////////////////////// dich chu
 637          void dich_chu(unsigned char text,int tocdo)
 638          { 
 639   1                                 
 640   1      
 641   1              unsigned char code quet[]={0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01};    
 642   1              unsigned char code dieu_khien[]={0xFE,0xFD,0xFB,0xF7,0xEF,0xDF,0xBF,0x7F}; 
 643   1              unsigned char code machucai[80]={
 644   1              0x66,0xFF,0xFF,0xDB,0xDB,0xC3,0xC3,0x00,         //M
 645   1              0x1F,0x33,0x33,0x1F,0x0F,0x1B,0x33,0x00,          //R
 646   1              0x7E,0x18,0x18,0x18,0x18,0x18,0x18,0x00,          //T
 647   1              0x66,0x66,0x66,0x66,0x66,0x66,0x3C,0x00,           //U
 648   1      
 649   1              ///////////
 650   1              0x66,0x66,0x66,0x7E,0x66,0x66,0x66,0x00,// H
 651   1              0x3F,0x03,0x03,0x1F,0x03,0x03,0x3F,0x00,//E
 652   1              0x03,0x03,0x03,0x03,0x03,0x03,0x3F,0x00,//L
 653   1              0x3C,0x66,0x66,0x66,0x66,0x66,0x3C,0x00,//O
 654   1              0x3C,0x18,0x18,0x18,0x18,0x18,0x3C,0x00,//I
 655   1              0x3C,0x66,0x66,0x66,0x7E,0x66,0x66,0x00,//A
 656   1              };
 657   1      
 658   1      
 659   1               unsigned char a,b,c;   
 660   1              switch(text)
 661   1              {
 662   2                      case 'M':
 663   2                      {       
 664   3                      for(b=0;b<8;b++)
 665   3                      {                     
 666   4                              for(c=0;c<tocdo;c++)
 667   4                               {
 668   5                                  for(a=0;a<8;a++)
 669   5                                      {                                
 670   6                                      dl=machucai[a];
 671   6                                      dk=dieu_khien[b];;
 672   6                                      ms=quet[a];
 673   6                                      delay(5);
 674   6                                      dl=ms=0x00;             
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 12  

 675   6                                      }                                       
 676   5                   }
 677   4                       }
 678   3                      }
 679   2                      break;
 680   2      
 681   2                      case 'R':
 682   2                      {       
 683   3                      for(b=0;b<8;b++)
 684   3                      {                     
 685   4                              for(c=0;c<tocdo;c++)
 686   4                               {
 687   5                                  for(a=0;a<8;a++)
 688   5                                      {                                
 689   6                                      dl=machucai[a+8];
 690   6                                      dk=dieu_khien[b];;
 691   6                                      ms=quet[a];
 692   6                                      delay(5);
 693   6                                      dl=ms=0x00;             
 694   6                                      }                                       
 695   5                   }
 696   4                       }
 697   3                      }
 698   2                      break;
 699   2      
 700   2                              case 'T':
 701   2                      {       
 702   3                      for(b=0;b<8;b++)
 703   3                      {                     
 704   4                              for(c=0;c<tocdo;c++)
 705   4                               {
 706   5                                  for(a=0;a<8;a++)
 707   5                                      {                                
 708   6                                      dl=machucai[a+16];
 709   6                                      dk=dieu_khien[b];;
 710   6                                      ms=quet[a];
 711   6                                      delay(5);
 712   6                                      dl=ms=0x00;             
 713   6                                      }                                       
 714   5                   }
 715   4                       }
 716   3                      }
 717   2                      break;
 718   2      
 719   2                              case 'U':
 720   2                      {       
 721   3                      for(b=0;b<8;b++)
 722   3                      {                     
 723   4                              for(c=0;c<tocdo;c++)
 724   4                               {
 725   5                                  for(a=0;a<8;a++)
 726   5                                      {                                
 727   6                                      dl=machucai[a+24];
 728   6                                      dk=dieu_khien[b];;
 729   6                                      ms=quet[a];
 730   6                                      delay(5);
 731   6                                      dl=ms=0x00;             
 732   6                                      }                                       
 733   5                   }
 734   4                       }
 735   3                      }
 736   2                      break;
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 13  

 737   2      
 738   2                              case 'H':
 739   2                      {       
 740   3                      for(b=0;b<8;b++)
 741   3                      {                     
 742   4                              for(c=0;c<tocdo;c++)
 743   4                               {
 744   5                                  for(a=0;a<8;a++)
 745   5                                      {                                
 746   6                                      dl=machucai[a+32];
 747   6                                      dk=dieu_khien[b];;
 748   6                                      ms=quet[a];
 749   6                                      delay(5);
 750   6                                      dl=ms=0x00;             
 751   6                                      }                                       
 752   5                   }
 753   4                       }
 754   3                      }
 755   2                      break;
 756   2      
 757   2                              case 'E':
 758   2                      {       
 759   3                      for(b=0;b<8;b++)
 760   3                      {                     
 761   4                              for(c=0;c<tocdo;c++)
 762   4                               {
 763   5                                  for(a=0;a<8;a++)
 764   5                                      {                                
 765   6                                      dl=machucai[a+40];
 766   6                                      dk=dieu_khien[b];;
 767   6                                      ms=quet[a];
 768   6                                      delay(5);
 769   6                                      dl=ms=0x00;             
 770   6                                      }                                       
 771   5                   }
 772   4                       }
 773   3                      }
 774   2                      break;
 775   2      
 776   2                              case 'L':
 777   2                      {       
 778   3                      for(b=0;b<8;b++)
 779   3                      {                     
 780   4                              for(c=0;c<tocdo;c++)
 781   4                               {
 782   5                                  for(a=0;a<8;a++)
 783   5                                      {                                
 784   6                                      dl=machucai[a+48];
 785   6                                      dk=dieu_khien[b];;
 786   6                                      ms=quet[a];
 787   6                                      delay(5);
 788   6                                      dl=ms=0x00;             
 789   6                                      }                                       
 790   5                   }
 791   4                       }
 792   3                      }
 793   2                      break;
 794   2      
 795   2                              case 'O':
 796   2                      {       
 797   3                      for(b=0;b<8;b++)
 798   3                      {                     
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 14  

 799   4                              for(c=0;c<tocdo;c++)
 800   4                               {
 801   5                                  for(a=0;a<8;a++)
 802   5                                      {                                
 803   6                                      dl=machucai[a+56];
 804   6                                      dk=dieu_khien[b];;
 805   6                                      ms=quet[a];
 806   6                                      delay(5);
 807   6                                      dl=ms=0x00;             
 808   6                                      }                                       
 809   5                   }
 810   4                       }
 811   3                      }
 812   2                      break;
 813   2                              case 'I':
 814   2                      {       
 815   3                      for(b=0;b<8;b++)
 816   3                      {                     
 817   4                              for(c=0;c<tocdo;c++)
 818   4                               {
 819   5                                  for(a=0;a<8;a++)
 820   5                                      {                                
 821   6                                      dl=machucai[a+64];
 822   6                                      dk=dieu_khien[b];;
 823   6                                      ms=quet[a];
 824   6                                      delay(5);
 825   6                                      dl=ms=0x00;             
 826   6                                      }                                       
 827   5                   }
 828   4                       }
 829   3                      }
 830   2                      break;
 831   2      
 832   2                              case 'A':
 833   2                      {       
 834   3                      for(b=0;b<8;b++)
 835   3                      {                     
 836   4                              for(c=0;c<tocdo;c++)
 837   4                               {
 838   5                                  for(a=0;a<8;a++)
 839   5                                      {                                
 840   6                                      dl=machucai[a+72];
 841   6                                      dk=dieu_khien[b];;
 842   6                                      ms=quet[a];
 843   6                                      delay(5);
 844   6                                      dl=ms=0x00;             
 845   6                                      }                                       
 846   5                   }
 847   4                       }
 848   3                      }
 849   2                      break;
 850   2      }
 851   1      }
 852          
 853          ////////////////////
 854          void pac_man(unsigned char tocdo,unsigned char lap)
 855          { 
 856   1                      unsigned char a,b,c,d;     
 857   1      
 858   1              unsigned char code quet[]={0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01};    
 859   1      //      unsigned char code dieu_khien[]={0xFE,0xFD,0xFB,0xF7,0xEF,0xDF,0xBF,0x7F}; 
 860   1              unsigned char code machucai[16]={
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 15  

 861   1              0x3C,0x42,0x81,0xF9,0xF9,0x81,0x42,0x3C,
 862   1              0x3C,0x42,0xF1,0x09,0x09,0xF1,0x42,0x3C,
 863   1              };
 864   1                for(d=0;d<lap;d++)
 865   1                {
 866   2                      for(b=0;b<2;b++)
 867   2                      {                     
 868   3                              for(c=0;c<tocdo;c++)
 869   3                               {
 870   4                                  for(a=0;a<8;a++)
 871   4                                      {                                
 872   5                                      dl=machucai[8*b+a];
 873   5                                      dk=0x3F;
 874   5                                      ms=quet[a];
 875   5                                      delay(5);
 876   5                                      dl=ms=0x00;             
 877   5                                      }                                       
 878   4                   }
 879   3                       }
 880   2                      }
 881   1      }
 882          //////////////////////////////////                              
 883          void main ()
 884          { 
 885   1      while(1)
 886   1      {
 887   2      hienthichucai('M',50);
 888   2      ban_phao_hoa(3);   //ok
 889   2      hienthichucai('R',50);
 890   2      ban_phao_hoa(3);   //ok
 891   2      hienthichucai('T',50);
 892   2      ban_phao_hoa(3);   //ok
 893   2      hienthichucai('U',50);
 894   2      ban_phao_hoa(3);   //ok
 895   2      pac_man(15,5);
 896   2      dich_chu('H',5); 
 897   2      dich_chu('E',5); 
 898   2      dich_chu('L',5); 
 899   2      dich_chu('L',5); 
 900   2      dich_chu('O',5); 
 901   2      ban_phao_hoa(3);   //ok
 902   2      ///////////////////////
 903   2      dich_chu('I',5); 
 904   2      dich_chu('A',5); 
 905   2      dich_chu('M',5); 
 906   2      //
 907   2      dich_chu('M',5); 
 908   2      dich_chu('R',5); 
 909   2      dich_chu('T',5); 
 910   2      dich_chu('U',5); 
 911   2      //
 912   2      pac_man(15,5);
 913   2      mua_roi();        //ok
 914   2      mang_len_xuong();  //oke
 915   2      hinh_vuong();
 916   2      lop_mang_xen_ke(200,3);
 917   2      //
 918   2      hieu_ung_lop_mang(100,2);
 919   2      quet_mang();
 920   2      pheu_len_xuong();
 921   2      linh_tinh();
 922   2      quet_qua_lai();  //oke
C51 COMPILER V9.00   CODE_CUBE                                                             06/04/2015 14:26:28 PAGE 16  

 923   2                      //oke
 924   2      }
 925   1      }                       


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   4526    ----
   CONSTANT SIZE    =    411    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----     240
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
